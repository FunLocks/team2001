package geoparser

import (
	"strconv"
	"strings"

	"../types"
)

// Coord info
type Coord struct {
	Latitude  string
	Longitude string
	Geodata   types.AutoGenerated
}

// Address 地名保存
type Address struct {
	City    string
	Town    string
	Geodata types.AutoGenerated
}

//GetCityName 都道府県名を取得
func (c *Coord) GetCityName() string {

	lenAddressComponents := len(c.Geodata.Results[0].AddressComponents)
	city := c.Geodata.Results[0].AddressComponents[lenAddressComponents-3].LongName
	// 空白を置換しないとURLが壊れる
	return strings.Replace(city, " ", "-", -1)
}

// GetTownName 都市名を取得
func (c *Coord) GetTownName() string {

	lenAddressComponents := len(c.Geodata.Results[0].AddressComponents)
	town := c.Geodata.Results[0].AddressComponents[lenAddressComponents-4].LongName
	// 空白を置換しないとURLが壊れる
	return strings.Replace(town, " ", "-", -1)
}

// GetLatitude 緯度を取得
func (a *Address) GetLatitude() string {

	var latitude = a.Geodata.Results[0].Geometry.Location.Lat
	return strconv.FormatFloat(latitude, 'f', -1, 64)
}

// GetLongitude 軽度を取得
func (a *Address) GetLongitude() string {

	var longitude = a.Geodata.Results[0].Geometry.Location.Lng
	return strconv.FormatFloat(longitude, 'f', -1, 64)
}
